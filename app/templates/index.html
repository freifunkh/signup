<!DOCTYPE html>
<html lang="en">
<head>
    <title>LeineLab e.V. - Mitgliedsantrag</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.5.0"></script>
    <style>
        body {
            padding: 20px;
        }
    </style>
</head>

<body style="display:flex; justify-content : center;">
    <div style="max-width: 600px;">
        <h1>LeineLab e.V. - Mitgliedsantrag</h1>
        <!-- <form hx-post="/" class="mb-3" hx-target="#frm" id="frm" hx-swap="outerHTML"> -->
            <!-- {{ form.csrf_token }} -->

            <h2>Basisdaten</h2>

            {# include "form.html" #}

            {% from "form.html" import render_field with context %}


            <form method="post" hx-swap="outerHTML" id="{{form._prefix}}form" hx-post novalidate hx-indicator="#spinner" encoding="{{encoding}}">

                {{ form.csrf_token }}

                {% if form.form_errors %}
                <div class="alert alert-danger" role="alert"><ul>
                {% for error in form.form_errors %}
                <li>{{error}}</li>
                {% endfor %}
                </ul></div>
                {% endif %}

                <div id="name-outer">
                {{ render_field(form.name) }}
                {{ render_field(form.full_address) }}
                </div>
                {{ render_field(form.email) }}

                <div id="x2" hx-post="" hx-trigger="change{{ ',load' | safe if "HX-Request" not in request.headers }}">
                    <h5 id="beitrag" hx-post="" hx-trigger="input from:#x2">
                        Dein Beitrag: <br><span class="badge rounded-pill bg-primary">
                        <span id="beitrag">{{ beitrag }}</span> â‚¬ / Monat</span>
                    </h5>
                
                    {{ render_field(form.mitgliedsart, False) }}
                    {{ render_field(form.x, False) }}
                </div>

                <h4>Zahlungsdaten</h4>

                <div id="sepa-dep" hx-post="" hx-trigger="change,input from:#name-outer{{ ',load' | safe if "HX-Request" not in request.headers }}">
                    {{ render_field(form.sepa.mitglied_is_inhabende, False)}}
                    {{ render_field(form.sepa.kontoinhabende) }}
                    {{ render_field(form.sepa.kontoinhabende_addresse) }}
                </div>

                {{ render_field(form.sepa.iban) }}
                {{ render_field(form.sepa.kreditinstitut) }}


                {{ render_field(form.sepa.einwilligung) }}

                <h4>Datenschutz</h4>

                {{ render_field(form.datenschutz) }}
                

                <button type="submit" class="btn btn-primary">Submit</button>

            </form>
    </div>
</body>

</html>
